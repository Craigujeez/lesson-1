{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nnamdiujah/Documents/React/lesson-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nnamdiujah/Documents/React/lesson-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Route,Switch,Redirect}from'react-router-dom';import Homepage from'./pages/Homepage';import Header from'./components/header/Header';import ShopPage from'./pages/Shop/ShopPage';import Checkout from'./pages/checkout/Checkout';import SignInPage from'./pages/SignIn/SignIn-and-SignOut-Page';import Collection from'./components/collection/Collection';import{auth,createUserProfileDocument}from'./firebase/firebase.utils';import'./App.css';var App=function App(){var dispatch=useDispatch();var isLoggedIn=useSelector(function(state){return state.firebase.auth;});var setUser=function setUser(user){dispatch({type:'LOAD_USER',user:user});};var unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=8;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;// checks if user exists in store and if not adds to store\nuserRef.onSnapshot(function(snapShot){setUser(snapShot.data());});console.log(userAuth,'user');_context.next=9;break;case 8:setUser(userAuth);case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());useEffect(function(){return function(){unsubscribeFromAuth();};},[]);console.log(\"current user\");return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",render:function render(){return isLoggedIn.uid?/*#__PURE__*/React.createElement(Homepage,null):/*#__PURE__*/React.createElement(SignInPage,null);}}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/shop\",component:ShopPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/checkout\",component:Checkout}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/sign-in\",render:function render(){return isLoggedIn.uid?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):/*#__PURE__*/React.createElement(SignInPage,null);}}),/*#__PURE__*/React.createElement(Route,{path:\"/shop/:collectionid\",component:Collection})));};export default App;","map":{"version":3,"sources":["/Users/nnamdiujah/Documents/React/lesson-1/src/App.js"],"names":["React","useEffect","useDispatch","useSelector","Route","Switch","Redirect","Homepage","Header","ShopPage","Checkout","SignInPage","Collection","auth","createUserProfileDocument","App","dispatch","isLoggedIn","state","firebase","setUser","user","type","unsubscribeFromAuth","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","data","console","log","uid"],"mappings":"+TAAA,gDACA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,KAA8B,OAA9B,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,KAAR,CAAcC,MAAd,CAAsBC,QAAtB,KAAqC,kBAArC,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wCAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oCAAvB,CACA,OAAQC,IAAR,CAAeC,yBAAf,KAA+C,2BAA/C,CACA,MAAO,WAAP,CAGA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,CAAAA,UAAU,CAAGd,WAAW,CAAC,SAAAe,KAAK,QAAIA,CAAAA,KAAK,CAACC,QAAN,CAAeN,IAAnB,EAAN,CAA9B,CAEA,GAAMO,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,CAAU,CACxBL,QAAQ,CAAC,CAACM,IAAI,CAAC,WAAN,CAAmBD,IAAI,CAAEA,IAAzB,CAAD,CAAR,CACD,CAFD,CAIA,GAAME,CAAAA,mBAAmB,CAAGV,IAAI,CAACW,kBAAL,0FAAyB,iBAAMC,QAAN,kIAEhDA,QAFgD,+CAG3BX,CAAAA,yBAAyB,CAACW,QAAD,CAHE,QAG3CC,OAH2C,eAGU;AAE3DA,OAAO,CAACC,UAAR,CAAmB,SAAAC,QAAQ,CAAI,CAC7BR,OAAO,CAACQ,QAAQ,CAACC,IAAT,EAAD,CAAP,CACD,CAFD,EAGAC,OAAO,CAACC,GAAR,CAAYN,QAAZ,CAAsB,MAAtB,EARiD,6BAS5CL,OAAO,CAACK,QAAD,CAAP,CAT4C,sDAAzB,+DAA5B,CAaAxB,SAAS,CAAC,UAAM,CAEd,MAAO,WAAI,CACTsB,mBAAmB,GACpB,CAFD,CAGD,CALQ,CAKN,EALM,CAAT,CAOAO,OAAO,CAACC,GAAR,CAAa,cAAb,EAGA,mBACE,qDACE,oBAAC,MAAD,MADF,cAEQ,oBAAC,MAAD,mBACI,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,MAAM,CAAE,wBAAMd,CAAAA,UAAU,CAACe,GAAX,cAAkB,oBAAC,QAAD,MAAlB,cAAkC,oBAAC,UAAD,MAAxC,EAA9B,EADJ,cAEI,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,OAAlB,CAA0B,SAAS,CAAEvB,QAArC,EAFJ,cAGI,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,CAA8B,SAAS,CAAEC,QAAzC,EAHJ,cAII,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAE,UAAnB,CAA8B,MAAM,CAAE,wBAAMO,CAAAA,UAAU,CAACe,GAAX,cAAkB,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAlB,cAAyC,oBAAC,UAAD,MAA/C,EAAtC,EAJJ,cAKI,oBAAC,KAAD,EAAO,IAAI,sBAAX,CAAoC,SAAS,CAAEpB,UAA/C,EALJ,CAFR,CADF,CAYD,CA3CD,CA6CA,cAAeG,CAAAA,GAAf","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React,{useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {Route,Switch, Redirect} from 'react-router-dom';\nimport Homepage from './pages/Homepage';\nimport Header from './components/header/Header';\nimport ShopPage from './pages/Shop/ShopPage';\nimport Checkout from './pages/checkout/Checkout';\nimport SignInPage from './pages/SignIn/SignIn-and-SignOut-Page';\nimport Collection from './components/collection/Collection';\nimport {auth , createUserProfileDocument} from './firebase/firebase.utils';\nimport './App.css'\n\n\nconst App = () => {\n  const dispatch = useDispatch();\n  const isLoggedIn = useSelector(state => state.firebase.auth);\n\n  const setUser = (user) => {\n    dispatch({type:'LOAD_USER', user: user})\n  }\n\n  const unsubscribeFromAuth = auth.onAuthStateChanged( async userAuth => {\n\n    if(userAuth){\n      const userRef = await createUserProfileDocument(userAuth); // checks if user exists in store and if not adds to store\n\n      userRef.onSnapshot(snapShot => {\n        setUser(snapShot.data());\n      })\n      console.log(userAuth, 'user');\n    } else setUser(userAuth);\n\n  }) \n\n  useEffect(() => {\n\n    return ()=>{\n      unsubscribeFromAuth();\n    }\n  }, [])\n\n  console.log( \"current user\");\n  \n\n  return ( \n    <>\n      <Header/>\n            <Switch>\n                <Route exact path='/' render={() => isLoggedIn.uid ? (<Homepage/>) : (<SignInPage/>)}/>\n                <Route exact path='/shop' component={ShopPage}/>\n                <Route exact path='/checkout' component={Checkout}/>\n                <Route exact path ='/sign-in' render={() => isLoggedIn.uid ? (<Redirect to=\"/\"/>) : (<SignInPage/>)}/>\n                <Route path={`/shop/:collectionid`} component={Collection}/>\n            </Switch>\n    </>\n   );\n}\n \nexport default App;\n"]},"metadata":{},"sourceType":"module"}