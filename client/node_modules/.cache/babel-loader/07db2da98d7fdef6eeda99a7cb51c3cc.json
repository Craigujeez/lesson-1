{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nnamdiujah/Documents/React/lesson-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/nnamdiujah/Documents/React/lesson-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/Users/nnamdiujah/Documents/React/lesson-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nvar config = {\n  apiKey: \"AIzaSyAByu0PbfC4ivc5XuMh_Tj3nbzppyGRbw8\",\n  authDomain: \"crown-db-b1c97.firebaseapp.com\",\n  databaseURL: \"https://crown-db-b1c97.firebaseio.com\",\n  projectId: \"crown-db-b1c97\",\n  storageBucket: \"crown-db-b1c97.appspot.com\",\n  messagingSenderId: \"693624680939\",\n  appId: \"1:693624680939:web:64bdeefa29dbdf4dfa69ae\",\n  measurementId: \"G-6R40MGLKQ8\"\n}; // function below stores our user in our firebase database known as fire store\n\nexport var createUserProfileDocument = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth, additionalData) {\n    var userRef, snapShot, displayName, email, createdAt;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (userAuth) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            // searches for user based off their uinique id\n            userRef = firestore.doc(\"users/\".concat(userAuth.uid));\n            _context.next = 5;\n            return userRef.get();\n\n          case 5:\n            snapShot = _context.sent;\n\n            if (snapShot.exists) {\n              _context.next = 17;\n              break;\n            }\n\n            displayName = userAuth.displayName, email = userAuth.email;\n            createdAt = new Date();\n            _context.prev = 9;\n            _context.next = 12;\n            return userRef.set(_objectSpread({\n              displayName: displayName,\n              email: email,\n              createdAt: createdAt\n            }, additionalData));\n\n          case 12:\n            _context.next = 17;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](9);\n            console.log('error creating user', _context.t0.message);\n\n          case 17:\n            return _context.abrupt(\"return\", userRef);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[9, 14]]);\n  }));\n\n  return function createUserProfileDocument(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var addCollectionAndDocuments = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(collectionKey, // \n  objectsToAdd) {\n    var collectionRef, batch;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            collectionRef = firestore.collection(collectionKey);\n            batch = firestore.batch();\n            objectsToAdd.forEach(function (obj) {\n              var newDocRef = collectionRef.doc();\n              batch.set(newDocRef, obj);\n            });\n            _context2.next = 5;\n            return batch.commit();\n\n          case 5:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function addCollectionAndDocuments(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var convertCollectionsSnapshotToMap = function convertCollectionsSnapshotToMap(collections) {\n  var transformedCollection = collections.docs.map(function (doc) {\n    var _doc$data = doc.data(),\n        title = _doc$data.title,\n        items = _doc$data.items;\n\n    return {\n      routeName: encodeURI(title.toLowerCase()),\n      id: doc.id,\n      title: title.toLowerCase(),\n      items: items\n    };\n  });\n  return transformedCollection;\n};\nexport var convertDirectorySnapshotToMap = function convertDirectorySnapshotToMap(directory) {\n  var transformedDirectory = directory.docs.map(function (doc) {\n    var _doc$data2 = doc.data(),\n        title = _doc$data2.title,\n        imageUrl = _doc$data2.imageUrl,\n        linkUrl = _doc$data2.linkUrl;\n\n    return {\n      id: doc.id,\n      title: title,\n      imageUrl: imageUrl,\n      linkUrl: linkUrl\n    };\n  });\n  return transformedDirectory;\n}; // initialise app with the config object \n\nfirebase.initializeApp(config); // export firebase functions needed for the app;\n\nexport var auth = firebase.auth();\nexport var firestore = firebase.firestore(); // get the google authentication provider function\n\nvar provider = new firebase.auth.GoogleAuthProvider();\nprovider.setCustomParameters({\n  prompt: 'select_account'\n});\nexport var signInWithGoogle = function signInWithGoogle() {\n  return auth.signInWithPopup(provider);\n};\nexport default firebase;","map":{"version":3,"sources":["/Users/nnamdiujah/Documents/React/lesson-1/src/firebase/firebase.utils.js"],"names":["firebase","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","createUserProfileDocument","userAuth","additionalData","userRef","firestore","doc","uid","get","snapShot","exists","displayName","email","createdAt","Date","set","console","log","message","addCollectionAndDocuments","collectionKey","objectsToAdd","collectionRef","collection","batch","forEach","obj","newDocRef","commit","convertCollectionsSnapshotToMap","collections","transformedCollection","docs","map","data","title","items","routeName","encodeURI","toLowerCase","id","convertDirectorySnapshotToMap","directory","transformedDirectory","imageUrl","linkUrl","initializeApp","auth","provider","GoogleAuthProvider","setCustomParameters","prompt","signInWithGoogle","signInWithPopup"],"mappings":"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","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\nconst config = {\n    apiKey: \"AIzaSyAByu0PbfC4ivc5XuMh_Tj3nbzppyGRbw8\",\n    authDomain: \"crown-db-b1c97.firebaseapp.com\",\n    databaseURL: \"https://crown-db-b1c97.firebaseio.com\",\n    projectId: \"crown-db-b1c97\",\n    storageBucket: \"crown-db-b1c97.appspot.com\",\n    messagingSenderId: \"693624680939\",\n    appId: \"1:693624680939:web:64bdeefa29dbdf4dfa69ae\",\n    measurementId: \"G-6R40MGLKQ8\"\n  };\n\n  // function below stores our user in our firebase database known as fire store\n\n  export const createUserProfileDocument = async (userAuth, additionalData) => {\n      // check if user exists , if he doesnt exist the function terminates\n    if (!userAuth) return ;\n     // searches for user based off their uinique id\n    const userRef = firestore.doc(`users/${userAuth.uid}`)\n    const snapShot = await userRef.get();\n    // if user doesnt exist in store, the user is then added to store\n    if (!snapShot.exists){\n        const {displayName, email} = userAuth;\n        const createdAt = new Date();\n\n        try {\n            await userRef.set({displayName, email,createdAt, ...additionalData})\n        } catch (error){\n            console.log('error creating user', error.message);\n            \n        }\n    }\n    return userRef;\n  }\n\n  export const addCollectionAndDocuments = async (\n    collectionKey, // \n    objectsToAdd\n  ) => {\n    const collectionRef = firestore.collection(collectionKey);\n  \n    const batch = firestore.batch();\n    objectsToAdd.forEach(obj => {\n      const newDocRef = collectionRef.doc();\n      batch.set(newDocRef, obj);\n    });\n  \n    return await batch.commit();\n  };\n\n  export const convertCollectionsSnapshotToMap = (collections) => {\n\n      const transformedCollection = collections.docs.map(doc => {\n          const {title,items} = doc.data();\n\n          return {\n              routeName: encodeURI(title.toLowerCase()),\n              id: doc.id,\n              title: title.toLowerCase(),\n              items\n          }\n      });\n      return transformedCollection\n  }\n\n  export const convertDirectorySnapshotToMap = (directory) => {\n    const transformedDirectory  = directory.docs.map( doc => {\n        const {title, imageUrl,linkUrl} = doc.data();\n        return {\n            id: doc.id,\n            title,\n            imageUrl,\n            linkUrl\n        }\n    });\n    return transformedDirectory;\n  }\n  \n  // initialise app with the config object \n\n  firebase.initializeApp(config);\n\n  // export firebase functions needed for the app;\n\n  export const auth = firebase.auth();\n  export const firestore = firebase.firestore();\n\n  // get the google authentication provider function\n\n  const provider = new firebase.auth.GoogleAuthProvider();\n\n  provider.setCustomParameters({prompt : 'select_account'});\n\n  export const signInWithGoogle = () => auth.signInWithPopup(provider);\n\n  export default firebase ;"]},"metadata":{},"sourceType":"module"}